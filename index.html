<!DOCTYPE html>
<html lang="pl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RekruTracker - Twój osobisty asystent kariery</title>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="" />
    <link rel="stylesheet" as="style" onload="this.rel='stylesheet'"
        href="https://fonts.googleapis.com/css2?display=swap&family=Noto+Sans%3Awght%40400%3B500%3B700%3B900&family=Plus+Jakarta+Sans%3Awght%40400%3B500%3B700%3B800" />
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
</head>

<body>
    <!-- Loading overlay to prevent flashing content before authentication state is known -->
    <div id="loadingOverlay"
        style="display: flex; align-items: center; justify-content: center; position: fixed; inset: 0; background: white; z-index: 9999;">
        <span>Ładowanie...</span>
    </div>
    <div class="relative flex size-full min-h-screen flex-col bg-white group/design-root overflow-x-hidden"
        style='--select-button-svg: url("data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2724px%27 height=%2724px%27 fill=%27rgb(115,115,115)%27 viewBox=%270 0 256 256%27%3e%3cpath d=%27M181.66,170.34a8,8,0,0,1,0,11.32l-48,48a8,8,0,0,1-11.32,0l-48-48a8,8,0,0,1,11.32-11.32L128,212.69l42.34-42.35A8,8,0,0,1,181.66,170.34Zm-96-84.68L128,43.31l42.34,42.35a8,8,0,0,0,11.32-11.32l-48-48a8,8,0,0,0-11.32,0l-48,48A8,8,0,0,0,85.66,85.66Z%27%3e%3c/path%3e%3c/svg%3e"); font-family: "Plus Jakarta Sans", "Noto Sans", sans-serif;'>
        <div class="layout-container flex h-full grow flex-col">
            <header
                class="flex items-center justify-between whitespace-nowrap border-b border-solid border-b-[#e5e7eb] px-10 py-3 bg-white">
                <div class="flex items-center gap-4 text-[#141414]">
                    <div class="size-4">
                        <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M42.4379 44C42.4379 44 36.0744 33.9038 41.1692 24C46.8624 12.9336 42.2078 4 42.2078 4L7.01134 4C7.01134 4 11.6577 12.932 5.96912 23.9969C0.876273 33.9029 7.27094 44 7.27094 44L42.4379 44Z"
                                fill="currentColor"></path>
                        </svg>
                    </div>
                    <h2 class="text-[#141414] text-lg font-bold leading-tight tracking-[-0.015em]">RekruTracker</h2>
                </div>
                <div class="flex flex-1 justify-end gap-8">
                    <div class="flex items-center gap-9">
                        <a id="mainMenuLink" class="text-[#141414] text-sm font-medium leading-normal" href="#"
                            style="display: none;">Menu
                            główne</a>
                        <a class="text-[#141414] text-sm font-medium leading-normal" href="#"
                            onclick="showContactModal()">Kontakt</a>
                    </div>
                    <button
                        class="flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 bg-[#f5f5f5] text-[#141414] gap-2 text-sm font-bold leading-normal tracking-[0.015em] min-w-0 px-2.5 border border-[#e5e7eb] hidden">
                        <div class="text-[#141414]" data-icon="Bell" data-size="20px" data-weight="regular">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" fill="currentColor"
                                viewBox="0 0 256 256">
                                <path
                                    d="M221.8,175.94C216.25,166.38,208,139.33,208,104a80,80,0,1,0-160,0c0,35.34-8.26,62.38-13.81,71.94A16,16,0,0,0,48,200H88.81a40,40,0,0,0,78.38,0H208a16,16,0,0,0,13.8-24.06ZM128,216a24,24,0,0,1-22.62-16h45.24A24,24,0,0,1,128,216ZM48,184c7.7-13.24,16-43.92,16-80a64,64,0,1,1,128,0c0,36.05,8.28,66.73,16,80Z">
                                </path>
                            </svg>
                        </div>
                    </button>
                    <!-- Login/Logout functionality -->
                    <div id="authSection" class="flex items-center gap-2">
                        <span id="userInfo" class="text-[#141414] text-sm font-medium leading-normal"
                            style="display: none;"></span>
                        <button id="loginBtn"
                            class="text-[#141414] text-sm font-medium leading-normal bg-[#f5f5f5] px-3 py-2 rounded-lg border border-[#e5e7eb]">
                            Zaloguj
                        </button>
                        <button id="logoutBtn"
                            class="text-[#141414] text-sm font-medium leading-normal bg-[#f5f5f5] px-3 py-2 rounded-lg border border-[#e5e7eb]"
                            style="display: none;">
                            Wyloguj
                        </button>
                    </div>
                </div>
            </header>
            <div class="flex flex-1 justify-center py-5">
                <div style="width: 100%; margin: 0 auto; padding: 0 1rem;">
                    <div style="width: 100%;">

                        <!-- Landing page for non-authenticated users -->
                        <div id="landingPage" style="display: none;">
                            <div class="text-center py-12">
                                <h1 class="text-[#141414] text-4xl font-bold mb-6">
                                    RekruTracker<br>
                                    Twój osobisty asystent kariery
                                </h1>

                                <p class="text-[#6b7280] text-lg mb-8 max-w-2xl mx-auto">
                                    Skutecznie organizuj swoje aplikacje o pracę, śledź postępy i nie przegap żadnej
                                    szansy na rozwój kariery.
                                </p>

                                <!-- Preview/Screenshot mockup -->
                                <div class="max-w-6xl mx-auto mb-8 relative">
                                    <div
                                        class="bg-gradient-to-br from-[#f8fafc] to-[#e2e8f0] p-6 rounded-xl border-2 border-[#e5e7eb] shadow-lg">
                                        <!-- Mockup header -->
                                        <div class="flex justify-between items-center mb-4 opacity-90">
                                            <h3 class="text-[#141414] text-xl font-bold">Twoje aplikacje</h3>
                                            <div
                                                class="bg-[#141414] text-white px-4 py-2 rounded-lg text-sm font-bold opacity-80">
                                                <i class="fas fa-plus mr-2"></i>Dodaj aplikację
                                            </div>
                                        </div>

                                        <!-- Mockup table -->
                                        <div
                                            class="bg-white rounded-lg border border-[#e5e7eb] shadow-sm overflow-hidden">
                                            <div class="overflow-x-auto">
                                                <table class="w-full text-sm">
                                                    <thead class="bg-[#f9fafb] border-b border-[#e5e7eb]">
                                                        <tr>
                                                            <th class="px-3 py-2 text-left text-[#374151] font-medium">
                                                                Stanowisko</th>
                                                            <th class="px-3 py-2 text-left text-[#374151] font-medium">
                                                                Firma</th>
                                                            <th class="px-3 py-2 text-left text-[#374151] font-medium">
                                                                Data</th>
                                                            <th class="px-3 py-2 text-left text-[#374151] font-medium">
                                                                Aktualny status</th>
                                                            <th class="px-3 py-2 text-left text-[#374151] font-medium">
                                                                Wynagrodzenie</th>
                                                            <th class="px-3 py-2 text-left text-[#374151] font-medium">
                                                                Tryb</th>
                                                            <th class="px-3 py-2 text-left text-[#374151] font-medium">
                                                                Rodzaj</th>
                                                            <th class="px-3 py-2 text-left text-[#374151] font-medium">
                                                                Umowa</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr class="border-b border-[#f3f4f6] hover:bg-[#f9fafb]">
                                                            <td class="px-3 py-3 font-medium text-[#111827]">Frontend
                                                                Developer</td>
                                                            <td class="px-3 py-3 text-[#374151]">TechCorp</td>
                                                            <td class="px-3 py-3 text-[#6b7280]">2025-05-25</td>
                                                            <td class="px-3 py-3">
                                                                <span
                                                                    class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                                                    Rozmowa online
                                                                </span>
                                                            </td>
                                                            <td class="px-3 py-3 text-[#374151]">12000-15000 PLN</td>
                                                            <td class="px-3 py-3 text-[#6b7280]">Hybrydowy</td>
                                                            <td class="px-3 py-3 text-[#6b7280]">Pełny etat</td>
                                                            <td class="px-3 py-3 text-[#6b7280]">Umowa o pracę</td>
                                                        </tr>
                                                        <tr class="border-b border-[#f3f4f6] hover:bg-[#f9fafb]">
                                                            <td class="px-3 py-3 font-medium text-[#111827]">React
                                                                Developer</td>
                                                            <td class="px-3 py-3 text-[#374151]">StartupXYZ</td>
                                                            <td class="px-3 py-3 text-[#6b7280]">2025-05-22</td>
                                                            <td class="px-3 py-3">
                                                                <span
                                                                    class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                                                    Wysłano CV
                                                                </span>
                                                            </td>
                                                            <td class="px-3 py-3 text-[#374151]">8000-12000 PLN</td>
                                                            <td class="px-3 py-3 text-[#6b7280]">Zdalny</td>
                                                            <td class="px-3 py-3 text-[#6b7280]">Pełny etat</td>
                                                            <td class="px-3 py-3 text-[#6b7280]">Umowa B2B</td>
                                                        </tr>
                                                        <tr class="border-b border-[#f3f4f6] hover:bg-[#f9fafb]">
                                                            <td class="px-3 py-3 font-medium text-[#111827]">Marketing
                                                                Specialist</td>
                                                            <td class="px-3 py-3 text-[#374151]">BigCorp</td>
                                                            <td class="px-3 py-3 text-[#6b7280]">2025-05-20</td>
                                                            <td class="px-3 py-3">
                                                                <span
                                                                    class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                                                    Rozmowa telefoniczna
                                                                </span>
                                                            </td>
                                                            <td class="px-3 py-3 text-[#374151]">6000-8000 PLN</td>
                                                            <td class="px-3 py-3 text-[#6b7280]">Stacjonarny</td>
                                                            <td class="px-3 py-3 text-[#6b7280]">Pełny etat</td>
                                                            <td class="px-3 py-3 text-[#6b7280]">Umowa o pracę</td>
                                                        </tr>
                                                        <tr class="hover:bg-[#f9fafb]">
                                                            <td class="px-3 py-3 font-medium text-[#111827]">UX Designer
                                                            </td>
                                                            <td class="px-3 py-3 text-[#374151]">DesignStudio</td>
                                                            <td class="px-3 py-3 text-[#6b7280]">2025-05-18</td>
                                                            <td class="px-3 py-3">
                                                                <span
                                                                    class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800">
                                                                    Oferta
                                                                </span>
                                                            </td>
                                                            <td class="px-3 py-3 text-[#374151]">10000-13000 PLN</td>
                                                            <td class="px-3 py-3 text-[#6b7280]">Hybrydowy</td>
                                                            <td class="px-3 py-3 text-[#6b7280]">Niepełny etat</td>
                                                            <td class="px-3 py-3 text-[#6b7280]">Umowa zlecenie</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>

                                        <!-- Overlay effect to make it look like a preview -->
                                        <div
                                            class="absolute inset-0 bg-gradient-to-t from-white/20 via-transparent to-transparent rounded-xl pointer-events-none">
                                        </div>
                                    </div>
                                </div>

                                <!-- Call to action -->
                                <div class="text-center mb-8">
                                    <p class="text-[#6b7280] text-base mb-6">
                                        Zarejestruj się, aby rozpocząć śledzenie swoich aplikacji o pracę
                                    </p>

                                    <!-- Login form - initially hidden -->
                                    <div id="loginForm"
                                        class="max-w-md mx-auto bg-white border border-[#e5e7eb] rounded-lg p-6 shadow-lg mb-6"
                                        style="display: none;">
                                        <button id="google-signin-button-main"
                                            class="w-full inline-flex items-center justify-center px-6 py-3 border border-[#e5e7eb] rounded-lg bg-white text-[#141414] font-semibold hover:bg-[#f5f5f5] transition-all duration-200 shadow-sm">
                                            <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg"
                                                alt="Google logo" class="w-6 h-6 mr-3">
                                            Zaloguj się przez Google
                                        </button>
                                        <p id="main-user-status" class="mt-4 text-sm text-[#6b7280]"></p>
                                    </div>

                                    <button id="registerButton"
                                        class="mx-auto block px-8 py-4 bg-[#141414] text-white font-bold rounded-lg text-lg hover:bg-[#2d2d2d] transition-all duration-200 shadow-lg">
                                        Zarejestruj się za darmo
                                    </button>
                                </div>

                                <!-- Features section -->
                                <div class="max-w-4xl mx-auto grid md:grid-cols-3 gap-6 mt-12">
                                    <div class="text-center p-6 bg-white rounded-lg border border-[#e5e7eb] shadow-sm">
                                        <div
                                            class="bg-blue-100 w-12 h-12 rounded-lg flex items-center justify-center mx-auto mb-4">
                                            <i class="fas fa-chart-line text-blue-600 text-xl"></i>
                                        </div>
                                        <h3 class="text-[#141414] text-lg font-bold mb-2">Śledź postępy</h3>
                                        <p class="text-[#6b7280] text-sm">Monitoruj status każdej aplikacji od wysłania
                                            CV po podpisanie umowy</p>
                                    </div>

                                    <div class="text-center p-6 bg-white rounded-lg border border-[#e5e7eb] shadow-sm">
                                        <div
                                            class="bg-green-100 w-12 h-12 rounded-lg flex items-center justify-center mx-auto mb-4">
                                            <i class="fas fa-filter text-green-600 text-xl"></i>
                                        </div>
                                        <h3 class="text-[#141414] text-lg font-bold mb-2">Filtruj i sortuj</h3>
                                        <p class="text-[#6b7280] text-sm">Łatwo znajdź konkretne aplikacje dzięki
                                            zaawansowanym filtrom</p>
                                    </div>

                                    <div class="text-center p-6 bg-white rounded-lg border border-[#e5e7eb] shadow-sm">
                                        <div
                                            class="bg-purple-100 w-12 h-12 rounded-lg flex items-center justify-center mx-auto mb-4">
                                            <i class="fas fa-clock text-purple-600 text-xl"></i>
                                        </div>
                                        <h3 class="text-[#141414] text-lg font-bold mb-2">Nie przegap terminów</h3>
                                        <p class="text-[#6b7280] text-sm">Organizuj rozmowy i deadliny w jednym miejscu
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div> <!-- End landingPage -->

                        <!-- Main application content for authenticated users -->
                        <div id="mainContent" style="display: none;">
                            <!-- Prominent Add Application Button -->
                            <div id="headerSection"
                                style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                                <p class="text-[#141414] tracking-light text-[32px] font-bold leading-tight min-w-72">
                                    Twoje
                                    aplikacje</p>
                                <div style="display: flex; gap: 10px;">
                                    <button id="openAddAppModal" type="button"
                                        class="flex min-w-[140px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 px-6 bg-[#141414] text-white text-base font-bold leading-normal shadow-lg hover:bg-[#2d2d2d] transition-all duration-200">
                                        <i class="fas fa-plus mr-2"></i>
                                        <span class="truncate">Dodaj aplikację</span>
                                    </button>
                                </div>
                            </div>

                            <!-- Kolorowe karty statusów -->
                            <div id="quickFilters" style="margin: 1.5rem 0;">
                                <div class="filter-cards-grid"
                                    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                                    <div class="filter-card status-card" data-filter-type="status" data-filter-value="">
                                        <i class="fas fa-list"
                                            style="font-size: 1.75rem; color: #64748b; margin-bottom: 0.5rem;"></i>
                                        <span style="font-weight: 700; color: #334155; font-size: 1rem;">Wszystkie
                                            (<span id="totalCount">0</span>)</span>
                                    </div>

                                    <div class="filter-card status-card" data-filter-type="status"
                                        data-filter-value="Wysłano CV">
                                        <i class="fas fa-paper-plane"
                                            style="font-size: 1.75rem; color: #2563eb; margin-bottom: 0.5rem;"></i>
                                        <span style="font-weight: 700; color: #1e40af; font-size: 1rem;">Wysłano CV
                                            (<span id="sentCount">0</span>)</span>
                                    </div>

                                    <div class="filter-card status-card" data-filter-type="status"
                                        data-filter-value="Rozmowy">
                                        <i class="fas fa-comments"
                                            style="font-size: 1.75rem; color: #d97706; margin-bottom: 0.5rem;"></i>
                                        <span style="font-weight: 700; color: #b45309; font-size: 1rem;">Rozmowy (<span
                                                id="interviewCount">0</span>)</span>
                                    </div>

                                    <div class="filter-card status-card" data-filter-type="status"
                                        data-filter-value="Oferty">
                                        <i class="fas fa-handshake"
                                            style="font-size: 1.75rem; color: #059669; margin-bottom: 0.5rem;"></i>
                                        <span style="font-weight: 700; color: #047857; font-size: 1rem;">Oferty (<span
                                                id="offerCount">0</span>)</span>
                                    </div>

                                    <div class="filter-card status-card" data-filter-type="status"
                                        data-filter-value="Odrzucono">
                                        <i class="fas fa-times-circle"
                                            style="font-size: 1.75rem; color: #dc2626; margin-bottom: 0.5rem;"></i>
                                        <span style="font-weight: 700; color: #b91c1c; font-size: 1rem;">Odrzucono
                                            (<span id="rejectedCount">0</span>)</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Toggle Filters and Sort Buttons -->
                            <div id="filterSortButtons" style="display: flex; gap: 1rem; margin: 1rem 0;">
                                <button id="toggleFilters"
                                    class="flex items-center gap-2 text-[#141414] text-lg font-bold leading-tight tracking-[-0.015em] bg-[#f5f5f5] px-4 py-2 rounded-lg border border-[#e5e7eb]">
                                    <i class="fas fa-filter"></i> Pokaż filtry
                                </button>
                                <button id="toggleSort"
                                    class="flex items-center gap-2 text-[#141414] text-lg font-bold leading-tight tracking-[-0.015em] bg-[#f5f5f5] px-4 py-2 rounded-lg border border-[#e5e7eb]">
                                    <i class="fas fa-sort"></i> Sortuj
                                </button>
                                <button id="clearAllFilters"
                                    class="flex items-center gap-2 text-[#141414] text-lg font-bold leading-tight tracking-[-0.015em] bg-[#f5f5f5] px-4 py-2 rounded-lg border border-[#e5e7eb]">
                                    <i class="fas fa-times"></i> Usuń filtry
                                </button>
                            </div>

                            <!-- Hidden Filters Container -->
                            <div id="filtersContainer" class="filters-container" style="display: none;">
                                <h3
                                    class="text-[#141414] text-lg font-bold leading-tight tracking-[-0.015em] pb-2 pt-4">
                                    Filtry</h3>
                                <div class="flex max-w-[480px] flex-wrap items-end gap-4 py-3">
                                    <label class="flex flex-col min-w-40 flex-1">
                                        <p class="text-[#141414] text-base font-medium leading-normal pb-2">Stanowisko
                                        </p>
                                        <input id="filterStanowisko" placeholder="np. Frontend Developer"
                                            class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#141414] focus:outline-0 focus:ring-0 border border-[#e5e7eb] bg-white focus:border-[#141414] h-14 placeholder:text-neutral-500 p-[15px] text-base font-normal leading-normal"
                                            value="" />
                                    </label>
                                    <label class="flex flex-col min-w-40 flex-1">
                                        <p class="text-[#141414] text-base font-medium leading-normal pb-2">Firma</p>
                                        <input id="filterFirma" placeholder="np. Google"
                                            class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#141414] focus:outline-0 focus:ring-0 border border-[#e5e7eb] bg-white focus:border-[#141414] h-14 placeholder:text-neutral-500 p-[15px] text-base font-normal leading-normal"
                                            value="" />
                                    </label>
                                </div>
                                <div class="flex max-w-[480px] flex-wrap items-end gap-4 py-3">
                                    <label class="flex flex-col min-w-40 flex-1">
                                        <p class="text-[#141414] text-base font-medium leading-normal pb-2">Data</p>
                                        <input id="filterData" type="date" placeholder="Wybierz datę"
                                            class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#141414] focus:outline-0 focus:ring-0 border border-[#e5e7eb] bg-white focus:border-[#141414] h-14 placeholder:text-neutral-500 p-[15px] text-base font-normal leading-normal"
                                            value="" />
                                    </label>

                                </div>
                                <div class="flex max-w-[480px] flex-wrap items-end gap-4 py-3">
                                    <label class="flex flex-col min-w-40 flex-1">
                                        <p class="text-[#141414] text-base font-medium leading-normal pb-2">Tryb pracy
                                        </p>
                                        <select id="filterTryb"
                                            class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#141414] focus:outline-0 focus:ring-0 border border-[#e5e7eb] bg-white focus:border-[#141414] h-14 bg-[image:--select-button-svg] placeholder:text-neutral-500 p-[15px] text-base font-normal leading-normal">
                                            <option value="">Wszystkie tryby</option>
                                            <option value="STACJONARNY">Stacjonarny</option>
                                            <option value="HYBRYDOWY">Hybrydowy</option>
                                            <option value="ZDALNY">Zdalny</option>
                                        </select>
                                    </label>
                                    <label class="flex flex-col min-w-40 flex-1">
                                        <p class="text-[#141414] text-base font-medium leading-normal pb-2">Rodzaj</p>
                                        <select id="filterRodzaj"
                                            class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#141414] focus:outline-0 focus:ring-0 border border-[#e5e7eb] bg-white focus:border-[#141414] h-14 bg-[image:--select-button-svg] placeholder:text-neutral-500 p-[15px] text-base font-normal leading-normal">
                                            <option value="">Wszystkie rodzaje</option>
                                            <option value="PELNY_ETAT">Pełny etat</option>
                                            <option value="NIEPELNY_ETAT">Niepełny etat</option>
                                            <option value="STAZ">Staż</option>
                                        </select>
                                    </label>
                                </div>
                                <div class="flex max-w-[480px] flex-wrap items-end gap-4 py-3">
                                    <label class="flex flex-col min-w-40 flex-1">
                                        <p class="text-[#141414] text-base font-medium leading-normal pb-2">Umowa</p>
                                        <select id="filterUmowa"
                                            class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#141414] focus:outline-0 focus:ring-0 border border-[#e5e7eb] bg-white focus:border-[#141414] h-14 bg-[image:--select-button-svg] placeholder:text-neutral-500 p-[15px] text-base font-normal leading-normal">
                                            <option value="">Wszystkie umowy</option>
                                            <option value="UMOWA_O_PRACE">Umowa o pracę</option>
                                            <option value="UMOWA_B2B">Umowa B2B</option>
                                            <option value="UMOWA_ZLECENIE">Umowa zlecenie</option>
                                        </select>
                                    </label>
                                    <div class="flex items-center gap-2 pt-6">
                                        <input type="checkbox" id="showArchived" class="w-4 h-4">
                                        <label for="showArchived"
                                            class="text-[#141414] text-base font-medium leading-normal">Pokaż
                                            archiwalne</label>
                                    </div>
                                </div>
                            </div>

                            <!-- Hidden Sort Container -->
                            <div id="sortContainer" class="filters-container" style="display: none;">
                                <h3
                                    class="text-[#141414] text-lg font-bold leading-tight tracking-[-0.015em] pb-2 pt-4">
                                    Sortowanie</h3>
                                <div class="flex max-w-[480px] flex-wrap items-end gap-4 py-3">
                                    <label class="flex flex-col min-w-40 flex-1">
                                        <p class="text-[#141414] text-base font-medium leading-normal pb-2">Sortuj według daty aplikowania</p>
                                        <select id="sortOrder"
                                            class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#141414] focus:outline-0 focus:ring-0 border border-[#e5e7eb] bg-white focus:border-[#141414] h-14 bg-[image:--select-button-svg] placeholder:text-neutral-500 p-[15px] text-base font-normal leading-normal">
                                            <option value="desc">Od najnowszych</option>
                                            <option value="asc">Od najstarszych</option>
                                        </select>
                                    </label>
                                </div>
                            </div>

                            <div class="py-3">

                                <div id="applicationsCard">
                                    <!-- Licznik zostanie tu wstawiony przez JS -->
                                    <div class="table-responsive rounded-lg border border-[#e5e7eb] bg-white">
                                        <table class="applications-table">
                                            <thead>
                                                <tr class="bg-white border-b border-[#e5e7eb]">
                                                    <th class="px-3 py-3 text-left text-[#141414] text-sm font-medium leading-normal"
                                                        style="width: 18%;">
                                                        Stanowisko
                                                    </th>
                                                    <th class="px-3 py-3 text-left text-[#141414] text-sm font-medium leading-normal"
                                                        style="width: 13%;">
                                                        Firma
                                                    </th>
                                                    <th class="px-3 py-3 text-left text-[#141414] text-sm font-medium leading-normal"
                                                        style="width: 11%;">
                                                        Data aplikowania
                                                    </th>
                                                    <th class="px-3 py-3 text-left text-[#141414] text-sm font-medium leading-normal"
                                                        style="width: 12%;">
                                                        Aktualny status
                                                    </th>
                                                    <th class="px-3 py-3 text-left text-[#141414] text-sm font-medium leading-normal"
                                                        style="width: 13%;">
                                                        Wynagrodzenie
                                                    </th>
                                                    <th class="px-3 py-3 text-left text-[#141414] text-sm font-medium leading-normal"
                                                        style="width: 10%;">
                                                        Tryb
                                                    </th>
                                                    <th class="px-3 py-3 text-left text-[#141414] text-sm font-medium leading-normal"
                                                        style="width: 10%;">
                                                        Rodzaj
                                                    </th>
                                                    <th class="px-3 py-3 text-left text-[#141414] text-sm font-medium leading-normal"
                                                        style="width: 10%;">
                                                        Umowa
                                                    </th>
                                                    <th class="px-3 py-3 text-left text-[#141414] text-sm font-medium leading-normal"
                                                        style="width: 13%;">
                                                        Akcje
                                                    </th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <!-- Wiersze będą generowane dynamicznie przez JS -->
                                            </tbody>
                                        </table>
                                    </div>
                                    <div id="noApplicationsMessage" class="py-6 text-center text-gray-500" style="display: none;"></div>
                                </div>
                            </div>
                        </div> <!-- End mainContent -->

                        <!-- Contact page container (outside mainContent) -->
                        <div id="contactPage" class="flex justify-center items-center p-10" style="display: none;">
                            <div class="text-center max-w-3xl">
                                <h2 class="text-[#141414] text-3xl font-bold mb-6">Witamy w RekruTracker</h2>
                                <p class="text-[#141414] text-lg leading-relaxed mb-8">
                                    Twój osobisty asystent do organizowania aplikacji o pracę.
                                    Śledź postępy, nie przegap terminów i skutecznie zarządzaj procesem poszukiwania
                                    pracy.
                                </p>

                                <!-- Contact information section -->
                                <div class="bg-white p-8 rounded-xl border border-[#e5e7eb] shadow-lg mb-8">
                                    <h3 class="text-[#141414] text-2xl font-bold mb-6">Kontakt</h3>
                                    <!-- Email section hidden for MVP phase -->
                                    <div class="flex justify-center" style="display: none;">
                                        <div class="flex items-center gap-3">
                                            <i class="fas fa-envelope text-[#141414] w-5"></i>
                                            <span class="text-[#141414] text-lg">rekrutracker@example.com</span>
                                        </div>
                                    </div>
                                    <!-- Descriptive text hidden for MVP phase -->
                                    <p class="text-[#6b7280] text-base mt-6" style="display: none;">
                                        Masz pytania lub sugestie? Skontaktuj się z nami! Zawsze chętnie pomożemy i
                                        wysłuchamy Twoich opinii.
                                    </p>
                                </div>

                                <button id="returnToApplications"
                                    class="flex cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 px-6 bg-[#141414] text-white text-base font-bold leading-normal shadow-lg hover:bg-[#2d2d2d] transition-all duration-200 mx-auto">
                                    Powrót do aplikacji
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Contact Modal -->
        <div id="contactModal" class="modal" style="display: none;">
            <div class="modal-content">
                <button class="modal-close" onclick="closeContactModal()">&times;</button>
                <div class="text-[#141414] text-base leading-relaxed">
                    <p class="mb-4"><strong>Witaj w RekrutTacker – narzędziu do śledzenia aplikacji o pracę</strong></p>
                    <p class="mb-4">Masz dość rozproszonych notatek i niekończących się arkuszy? Rekrutracker pomaga
                        uporządkować wszystkie wysłane aplikacje, statusy rozmów i terminy odpowiedzi.</p>
                    <p class="mb-4">W jednym miejscu widzisz, gdzie aplikowałeś, co się dzieje i co warto zrobić dalej.
                    </p>
                    <p class="font-semibold">Prosto. Przejrzyście. Skutecznie.</p>
                </div>
            </div>
        </div>

        <!-- Add Application Modal -->
        <div id="addAppModal" class="modal">
            <div class="modal-content">
                <button class="modal-close" onclick="closeAddAppModal()">&times;</button>

                <div class="form-container">
                    <h2><i class="fas fa-plus-circle"></i> Dodaj aplikację</h2>
                    <form id="addApplicationForm">
                        <div class="form-group">
                            <label for="stanowisko"><i class="fas fa-briefcase"></i> Stanowisko</label>
                            <input type="text" id="stanowisko" name="stanowisko" required
                                placeholder="Np. Frontend Developer" pattern="[a-zA-ZąćęłńóśźżĄĆĘŁŃÓŚŹŻ\s]+"
                                title="Dozwolone są tylko litery i spacje">
                        </div>
                        <div class="form-group">
                            <label for="firma"><i class="fas fa-building"></i> Firma</label>
                            <input type="text" id="firma" name="firma" required placeholder="Np. Tech Innovations"
                                pattern="[a-zA-ZąćęłńóśźżĄĆĘŁŃÓŚŹŻ\s]+" title="Dozwolone są tylko litery i spacje">
                        </div>
                        <div class="form-group">
                            <label for="data"><i class="fas fa-calendar-alt"></i> Data aplikowania</label>
                            <input type="date" id="data" name="data" required>
                        </div>
                        <div class="form-group">
                            <label for="status"><i class="fas fa-tasks"></i> Status</label>
                            <select id="status" name="status" required>
                                <option value="">Wybierz status...</option>
                                <option value="Wysłano CV">Wysłano CV</option>
                                <option value="Rozmowa telefoniczna">Rozmowa telefoniczna</option>
                                <option value="Rozmowa online">Rozmowa online</option>
                                <option value="Rozmowa stacjonarna">Rozmowa stacjonarna</option>
                                <option value="Oferta">Oferta</option>
                                <option value="Odrzucono">Odrzucono</option>
                            </select>
                        </div>
                        <div class="salary-group">
                            <div class="salary-main">
                                <div class="form-group">
                                    <label for="wynagrodzenie"><i class="fas fa-money-bill-wave"></i>
                                        Wynagrodzenie</label>
                                    <input type="number" id="wynagrodzenie" name="wynagrodzenie" min="0" step="any"
                                        placeholder="np. 8000">
                                </div>
                            </div>
                            <div class="salary-currency">
                                <div class="form-group no-icon">
                                    <label for="waluta">Waluta</label>
                                    <select id="waluta" name="waluta">
                                        <option value="PLN">PLN</option>
                                        <option value="EUR">EUR</option>
                                        <option value="USD">USD</option>
                                    </select>
                                </div>
                            </div>
                            <div class="salary-type">
                                <div class="form-group no-icon">
                                    <label for="wynRodzaj">Rodzaj</label>
                                    <select id="wynRodzaj" name="wynRodzaj">
                                        <option value="BRUTTO">BRUTTO</option>
                                        <option value="NETTO">NETTO</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="tryb"><i class="fas fa-laptop-house"></i> Tryb pracy</label>
                            <select id="tryb" name="tryb" required>
                                <option value="">Wybierz tryb...</option>
                                <option value="STACJONARNY">Stacjonarny</option>
                                <option value="HYBRYDOWY">Hybrydowy</option>
                                <option value="ZDALNY">Zdalny</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="rodzaj"><i class="fas fa-clock"></i> Rodzaj</label>
                            <select id="rodzaj" name="rodzaj" required>
                                <option value="">Wybierz rodzaj...</option>
                                <option value="PELNY_ETAT">Pełny etat</option>
                                <option value="NIEPELNY_ETAT">Niepełny etat</option>
                                <option value="STAZ">Staż</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="umowa"><i class="fas fa-file-contract"></i> Umowa</label>
                            <select id="umowa" name="umowa" required>
                                <option value="">Wybierz umowę...</option>
                                <option value="UMOWA_O_PRACE">Umowa o pracę</option>
                                <option value="UMOWA_B2B">Umowa B2B</option>
                                <option value="UMOWA_ZLECENIE">Umowa zlecenie</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="kontakt"><i class="fas fa-address-book"></i> Kontakt</label>
                            <input type="text" id="kontakt" name="kontakt" placeholder="np. imię, email, telefon">
                        </div>
                        <div class="form-group">
                            <label for="link"><i class="fas fa-link"></i> Link do oferty</label>
                            <input type="url" id="link" name="link" placeholder="https://...">
                        </div>
                        <div class="form-group">
                            <label for="notatki"
                                style="font-weight:600;font-size:1.1em;display:block;margin-bottom:0.3em;">
                                <i class="fas fa-sticky-note"
                                    style="color:#4f8cff;margin-right:0.3em;position:static;"></i>Notatki
                            </label>
                            <textarea id="notatki" name="notatki" rows="3"
                                placeholder="Dodaj własne notatki do tej aplikacji..."
                                style="padding-left: 0.7rem;"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="images"
                                style="font-weight:600;font-size:1.1em;display:block;margin-bottom:0.3em;">
                                <i class="fas fa-image"
                                    style="color:#4f8cff;margin-right:0.3em;position:static;"></i>Załącz
                                zdjęcia/screeny
                            </label>
                            <input type="file" id="images" name="images" accept="image/*" multiple
                                style="width:100%;padding:0.7rem;border:1px solid #e5e7eb;border-radius:12px;background:white;font-size:1em;color:#141414;box-sizing:border-box;cursor:pointer;transition:all 0.2s ease;border:2px dashed #e5e7eb;"
                                onmouseover="this.style.borderColor='#4f8cff'; this.style.backgroundColor='#f8faff';"
                                onmouseout="this.style.borderColor='#e5e7eb'; this.style.backgroundColor='white';"
                                onfocus="this.style.borderColor='#4f8cff'; this.style.boxShadow='0 0 0 3px rgba(79, 140, 255, 0.1)';"
                                onblur="this.style.borderColor='#e5e7eb'; this.style.boxShadow='none';">
                            <div id="imagesPreview" class="images-preview"></div>
                            <div id="imageCount"
                                style="margin-top: 0.5rem; font-size: 0.9em; color: #666; text-align: center; display: none;">
                                <i class="fas fa-info-circle"></i> Wybrano <span id="imageCountNumber">0</span> zdjęć
                            </div>
                            <div style="margin-top: 0.5rem; text-align: center;">
                                <button type="button" onclick="clearAllImages()"
                                    style="background: #dc3545; color: white; border: none; padding: 0.3rem 0.8rem; border-radius: 6px; font-size: 0.9em; cursor: pointer;"
                                    title="Usuń wszystkie zdjęcia">
                                    <i class="fas fa-trash"></i> Usuń wszystkie
                                </button>
                            </div>
                        </div>
                        <div class="favorite-checkbox">
                            <input type="checkbox" id="favorite" name="favorite">
                            <span>Dodaj do ulubionych</span>
                            <i class="fas fa-star"></i>
                        </div>
                        <button type="submit" class="submit-btn"><i class="fas fa-paper-plane"></i> Dodaj
                            aplikację</button>
                    </form>
                    <p id="form-message" style="text-align:center; margin-top:1em; color:green;"></p>
                    <div id="auth-debug"
                        style="margin-top: 1rem; padding: 1rem; background: #f5f5f5; border-radius: 8px; font-size: 0.9em; color: #666;">
                        <strong>Status uwierzytelnienia:</strong>
                        <div id="auth-status">Sprawdzanie...</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal edycji aplikacji -->
        <div id="editModal">
            <div class="edit-tile">
                <button id="closeEditModal" type="button">&times;</button>
                <h2><i class="fas fa-plus-circle"></i> Edytuj aplikację</h2>
                <form id="editApplicationForm">
                    <input type="hidden" id="editAppId">
                    <div class="form-group">
                        <label for="editStanowisko"><i class="fas fa-briefcase"></i> Stanowisko</label>
                        <input type="text" id="editStanowisko" name="stanowisko" required
                            placeholder="Np. Frontend Developer" pattern="[a-zA-ZąćęłńóśźżĄĆĘŁŃÓŚŹŻ\s]+"
                            title="Dozwolone są tylko litery i spacje">
                    </div>
                    <div class="form-group">
                        <label for="editFirma"><i class="fas fa-building"></i> Firma</label>
                        <input type="text" id="editFirma" name="firma" required placeholder="Np. Tech Innovations"
                            pattern="[a-zA-ZąćęłńóśźżĄĆĘŁŃÓŚŹŻ\s]+" title="Dozwolone są tylko litery i spacje">
                    </div>
                    <div class="form-group">
                        <label for="editData"><i class="fas fa-calendar-alt"></i> Data aplikowania</label>
                        <input type="date" id="editData" name="data" required>
                    </div>
                    <div class="form-group">
                        <label for="editStatus"><i class="fas fa-tasks"></i> Status</label>
                        <select id="editStatus" name="status" required>
                            <option value="">Wybierz status...</option>
                            <option value="Wysłano CV">Wysłano CV</option>
                            <option value="Rozmowa telefoniczna">Rozmowa telefoniczna</option>
                            <option value="Rozmowa online">Rozmowa online</option>
                            <option value="Rozmowa stacjonarna">Rozmowa stacjonarna</option>
                            <option value="Oferta">Oferta</option>
                            <option value="Odrzucono">Odrzucono</option>
                        </select>
                    </div>

                    <div class="salary-group">
                        <div class="salary-main">
                            <div class="form-group">
                                <label for="editWynagrodzenie"><i class="fas fa-money-bill-wave"></i>
                                    Wynagrodzenie</label>
                                <input type="number" id="editWynagrodzenie" name="wynagrodzenie" min="0" step="any"
                                    placeholder="np. 8000">
                            </div>
                        </div>
                        <div class="salary-currency">
                            <div class="form-group no-icon">
                                <label for="editWaluta">Waluta</label>
                                <select id="editWaluta" name="waluta">
                                    <option value="PLN">PLN</option>
                                    <option value="EUR">EUR</option>
                                    <option value="USD">USD</option>
                                </select>
                            </div>
                        </div>
                        <div class="salary-type">
                            <div class="form-group no-icon">
                                <label for="editWynRodzaj">Rodzaj</label>
                                <select id="editWynRodzaj" name="wynRodzaj">
                                    <option value="BRUTTO">BRUTTO</option>
                                    <option value="NETTO">NETTO</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="editTryb"><i class="fas fa-laptop-house"></i> Tryb pracy</label>
                        <select id="editTryb" name="tryb" required>
                            <option value="">Wybierz tryb...</option>
                            <option value="STACJONARNY">Stacjonarny</option>
                            <option value="HYBRYDOWY">Hybrydowy</option>
                            <option value="ZDALNY">Zdalny</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="editRodzaj"><i class="fas fa-clock"></i> Rodzaj</label>
                        <select id="editRodzaj" name="rodzaj" required>
                            <option value="">Wybierz rodzaj...</option>
                            <option value="PELNY_ETAT">Pełny etat</option>
                            <option value="NIEPELNY_ETAT">Niepełny etat</option>
                            <option value="STAZ">Staż</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="editUmowa"><i class="fas fa-file-contract"></i> Umowa</label>
                        <select id="editUmowa" name="umowa" required>
                            <option value="">Wybierz umowę...</option>
                            <option value="UMOWA_O_PRACE">Umowa o pracę</option>
                            <option value="UMOWA_B2B">Umowa B2B</option>
                            <option value="UMOWA_ZLECENIE">Umowa zlecenie</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="editKontakt"><i class="fas fa-address-book"></i> Kontakt</label>
                        <input type="text" id="editKontakt" name="kontakt" placeholder="np. imię, email, telefon">
                    </div>
                    <div class="form-group">
                        <label for="editLink"><i class="fas fa-link"></i> Link do oferty</label>
                        <input type="url" id="editLink" name="link" placeholder="https://...">
                    </div>
                    <div class="form-group">
                        <label for="editNotatki"
                            style="font-weight:600;font-size:1.1em;display:block;margin-bottom:0.3em;">
                            <i class="fas fa-sticky-note"
                                style="color:#4f8cff;margin-right:0.3em;position:static;"></i>Notatki
                        </label>
                        <textarea id="editNotatki" name="notatki" rows="3"
                            placeholder="Dodaj własne notatki do tej aplikacji..."
                            style="padding-left: 0.7rem;"></textarea>
                    </div>

                    <!-- Dodawanie zdjęć/screenów -->
                    <div class="form-group">
                        <label for="editImages" style="font-weight:600;display:block;margin-bottom:0.3em;">
                            <i class="fas fa-image" style="color:#4f8cff;margin-right:0.3em;"></i>Załącz zdjęcia/screeny
                        </label>
                        <input type="file" id="editImages" accept="image/*" multiple
                            style="width:100%;padding:0.7rem;border:2px dashed #e5e7eb;border-radius:12px;background:white;font-size:1em;color:#141414;box-sizing:border-box;cursor:pointer;transition:all 0.2s ease;"
                            onmouseover="this.style.borderColor='#4f8cff'; this.style.backgroundColor='#f8faff';"
                            onmouseout="this.style.borderColor='#e5e7eb'; this.style.backgroundColor='white';"
                            onfocus="this.style.borderColor='#4f8cff'; this.style.boxShadow='0 0 0 3px rgba(79, 140, 255, 0.1)';"
                            onblur="this.style.borderColor='#e5e7eb'; this.style.boxShadow='none';">
                        <div id="editImagesPreview" style="margin-top:0.5em;display:flex;gap:0.5em;flex-wrap:wrap;">
                        </div>
                    </div>

                    <!-- Historia statusu -->
                    <div id="statusHistoryBox"
                        style="margin:1em 0; padding:1em; background:#f9fafb; border-radius:8px; border:1px solid #e5e7eb;">
                        <strong style="color:#141414; display:flex; align-items:center; gap:0.5em;">
                            <i class="fas fa-history" style="color:#6b7280;"></i>Historia statusu:
                        </strong>
                        <ul id="statusHistoryList"
                            style="margin:0.5em 0 0 1.5em; padding:0; list-style-type:disc; color:#6b7280;"></ul>
                    </div>

                    <div class="favorite-checkbox">
                        <input type="checkbox" id="editFavorite" name="favorite">
                        <span>Dodaj do ulubionych</span>
                        <i class="fas fa-star"></i>
                    </div>

                    <button type="submit" class="submit-btn"><i class="fas fa-save"></i> Zapisz zmiany</button>
                    <button type="button" id="archiveAppBtn"
                        style="width:100%;margin-top:1em;background:#6b7280;color:#fff;font-weight:600;border-radius:8px;padding:0.7em;border:none;">
                        Archiwizuj aplikację
                    </button>
                    <button type="button" id="deleteAppBtn"
                        style="width:100%;margin-top:1em;background:none;border:none;color:#dc2626;font-weight:600;cursor:pointer;">
                        <i class="fas fa-trash"></i> Usuń aplikację
                    </button>
                </form>
                <p id="editFormMessage" style="text-align:center; margin-top:1em; color:green;"></p>
            </div>
        </div>

        <!-- Image Preview Modal -->
        <div id="imageModal" class="modal">
            <div class="modal-content" style="max-width: 90vw; max-height: 90vh; padding: 1rem; background: transparent; border: none; display: flex; align-items: center; justify-content: center;">
                <button class="modal-close" onclick="closeImageModal()" style="position: absolute; top: 20px; right: 20px; background: rgba(0,0,0,0.7); color: white; border: none; border-radius: 50%; width: 40px; height: 40px; font-size: 1.5rem; cursor: pointer; z-index: 1001;">&times;</button>
                <img id="imageModalImg" style="max-width: 100%; max-height: 100%; object-fit: contain; border-radius: 8px; box-shadow: 0 4px 20px rgba(0,0,0,0.3);" alt="Podgląd obrazu">
            </div>
        </div>

        <style>
            .modal {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.5);
                z-index: 1000;
                align-items: center;
                justify-content: center;
            }

            .modal.active {
                display: flex;
            }

            .modal-content {
                background: white;
                padding: 2rem;
                border-radius: 12px;
                max-width: 600px;
                width: 90%;
                max-height: 80vh;
                overflow-y: auto;
                position: relative;
                border: 1px solid #e5e7eb;
            }

            .modal-close {
                position: absolute;
                top: 1rem;
                right: 1rem;
                background: none;
                border: none;
                font-size: 1.5rem;
                color: #6b7280;
                cursor: pointer;
                transition: color 0.2s;
            }

            .modal-close:hover {
                color: #141414;
            }

            #imageModal .modal-content {
                background: transparent;
                border: none;
                padding: 0;
                max-width: 90%;
            }

            #imageModal img {
                border-radius: 8px;
                box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            }
        </style>

        <!-- Firebase v10 SDK -->
        <script type="module">
            // Firebase v10 imports
            import { initFirebase } from './firebase-init.js';
            import { collection, query, where, orderBy, getDocs, doc, getDoc, updateDoc, deleteDoc, onSnapshot } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js';
            import { onAuthStateChanged, GoogleAuthProvider, signInWithPopup, signOut } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js';

            // Initialize Firebase using shared module
            const { db, auth } = initFirebase();

            // Make Firebase services available globally
            window.firebaseModules = {
                collection,
                query,
                where,
                orderBy,
                getDocs,
                doc,
                getDoc,
                updateDoc,
                deleteDoc,
                onSnapshot,
                onAuthStateChanged,
                GoogleAuthProvider,
                signInWithPopup,
                signOut
            };

        </script>
        <script src="main.js"></script>
        <script src="image-modal.js"></script>
        <script type="module" src="add-application.js"></script>


        <script>
            function showContactModal() {
                // Hide both main content and landing page (depending on which is visible)
                document.getElementById('mainContent').style.display = 'none';
                document.getElementById('landingPage').style.display = 'none';

                // Show contact page
                document.getElementById('contactPage').style.display = 'flex';
            }

            function closeContactModal() {
                // Hide contact page
                document.getElementById('contactPage').style.display = 'none';

                // Check if user is authenticated to decide which content to show
                const user = window.auth?.currentUser;
                if (user) {
                    // User is authenticated - show main application content
                    document.getElementById('mainContent').style.display = 'block';
                    const landingPage = document.getElementById('landingPage');
                    if (landingPage) {
                        landingPage.style.display = 'none';
                    }
                } else {
                    // User is not authenticated - show landing page
                    const landingPage = document.getElementById('landingPage');
                    if (landingPage) {
                        landingPage.style.display = 'block';
                    }
                    const mainContent = document.getElementById('mainContent');
                    if (mainContent) {
                        mainContent.style.display = 'none';
                    }
                }
            }

            function openAddAppModal() {
                document.getElementById('addAppModal').classList.add('active');
            }

            function closeAddAppModal() {
                document.getElementById('addAppModal').classList.remove('active');
            }



            // Event listener for the return button
            document.addEventListener('DOMContentLoaded', function () {
                const returnToApplicationsBtn = document.getElementById('returnToApplications');
                if (returnToApplicationsBtn) {
                    returnToApplicationsBtn.addEventListener('click', function () {
                        closeContactModal();
                    });
                }

                // Main menu link handler
                const mainMenuLink = document.getElementById('mainMenuLink');
                if (mainMenuLink) {
                    mainMenuLink.addEventListener('click', function (e) {
                        e.preventDefault();
                        // Hide contact page
                        document.getElementById('contactPage').style.display = 'none';

                        // Check if user is authenticated to decide which content to show
                        const user = window.auth?.currentUser;
                        if (user) {
                            // User is authenticated - show main application content
                            document.getElementById('mainContent').style.display = 'block';
                            const landingPage = document.getElementById('landingPage');
                            if (landingPage && landingPage.style.display !== 'none') {
                                landingPage.style.display = 'none';
                            }
                        } else {
                            // User is not authenticated - show landing page
                            const landingPage = document.getElementById('landingPage');
                            if (landingPage) {
                                landingPage.style.display = 'block';
                            }
                            const mainContent = document.getElementById('mainContent');
                            if (mainContent) {
                                mainContent.style.display = 'none';
                            }
                        }
                    });
                }

                // Register button click handler - show login form
                const registerButton = document.getElementById('registerButton');
                const loginForm = document.getElementById('loginForm');
                if (registerButton && loginForm) {
                    registerButton.addEventListener('click', function () {
                        loginForm.style.display = 'block';
                        registerButton.style.display = 'none';
                    });
                }

                // Hook Add Application button if present
                const addAppBtn = document.getElementById('openAddAppModal');
                if (addAppBtn) {
                    addAppBtn.addEventListener('click', function () {
                        openAddAppModal();
                    });
                }

                // Close modals when clicking outside the form
                const addAppModal = document.getElementById('addAppModal');
                if (addAppModal) {
                    addAppModal.addEventListener('click', function (e) {
                        if (e.target === addAppModal) {
                            closeAddAppModal();
                        }
                    });
                }

                const editModal = document.getElementById('editModal');
                if (editModal) {
                    editModal.addEventListener('click', function (e) {
                        if (e.target === editModal) {
                            const closeBtn = document.getElementById('closeEditModal');
                            if (closeBtn) closeBtn.click();
                        }
                    });
                }

                // Image modal click handler moved to image-modal.js
            });
        </script>
</body>

</html>